<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    
        <record id="view_account_invoice_filter_confirming" model="ir.ui.view">
            <field name="name">account.invoice.select.confirming</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                <filter name="invoices" position="after">
                    <filter name="draft" string="Confirming" domain="[('state','=','confirming')]" help="Pending confirming"/>
                </filter>
                <field name="period_id" position="after">
                    <field name="date_due"/>
                </field>
            </field>
        </record>
        
        <record id="invoice_form_confirming" model="ir.ui.view">
            <field name="name">account.invoice.form</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="arch" type="xml">
                <button name="invoice_proforma2" position="after">
                    <button name="invoice_confirming" states="open" string="Confirming" groups="base.group_user"/>
                </button>
                <xpath expr="//button[@name='invoice_print'][1]" position="attributes">
                    <attribute name = "attrs">{'invisible':['|',('sent','=',True), ('state', 'not in', ['open','confirming'])]}</attribute>
                </xpath>
                <xpath expr="//button[@name='invoice_print'][last()]" position="attributes">
                    <attribute name = "attrs">{'invisible':['|',('sent','=',False), ('state', 'not in', ['open','confirming'])]}</attribute>
                </xpath>
                <xpath expr="//button[@name='action_invoice_sent'][1]" position="attributes">
                    <attribute name = "attrs">{'invisible':['|',('sent','=',True), ('state', 'not in', ['open','confirming'])]}</attribute>
                </xpath>
                <xpath expr="//button[@name='action_invoice_sent'][last()]" position="attributes">
                    <attribute name = "attrs">{'invisible':['|',('sent','=',False), ('state', 'not in', ['open','confirming'])]}</attribute>
                </xpath>
                <xpath expr="//button[@name='invoice_cancel']" position="attributes">
                    <attribute name = "states">draft,proforma2,open,confirming</attribute>
                </xpath>
                <xpath expr="//button[@string='Refund Invoice']" position="attributes">
                    <attribute name = "states">open,proforma2,paid,confirming</attribute>
                </xpath>
            </field>
        </record>
    
        <record id="view_invoice_customer_confirming" model="ir.ui.view">
            <field name="name">account.invoice.customer.pay.confirming</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account_voucher.view_invoice_customer"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='invoice_pay_customer'][1]" position="attributes">
                    <attribute name = "attrs">{'invisible':['|',('sent','=',True), ('state', 'not in', ['open','confirming'])]}</attribute>
                </xpath>
                <xpath expr="//button[@name='invoice_pay_customer'][last()]" position="attributes">
                    <attribute name = "attrs">{'invisible':['|',('sent','=',False), ('state', 'not in', ['open','confirming'])]}</attribute>
                </xpath>
            </field>
        </record>
    
    </data>
</openerp>